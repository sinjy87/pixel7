<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="cart"> 

	<!-- img_num에 대한 아이디 -->
	<select id="id" parameterType="int" resultType="String">
		select id from img_item
		where img_num=#{img_num} 
	</select>

	<!-- img_num에 대한 내용 -->
	<select id="content" parameterType="int" resultType="String">
		select img_content from img_item
		where img_num=#{img_num} 
	</select>
	
	<!-- img_num에 대한 사진 -->
	<select id="photo" parameterType="int" resultType="String">
		select img_photo from img_item
		where img_num=#{img_num} 
	</select>

	<!-- img_num에 대한 가격 -->
	<select id="price" parameterType="int" resultType="String">
		select img_price from img_item
		where img_num=#{img_num} 
	</select>

	<delete id="delete" parameterType="int">
		delete from cart
		where cart_num = #{cart_num}
	</delete>
	
<!-- 	<update id="update" parameterType="CartDTO"> -->
<!-- 	 update없음. --> 
<!-- 	</update> -->

	<insert id="create" parameterType="CartDTO">
		insert into cart (cart_num, img_num, id)
		values ((select nvl(max(cart_num),0)+1 from cart), #{img_num}, #{id})
	</insert>

	<select id="read" parameterType="int" resultType="CartDTO">
		select cart_num, img_num, id from cart
		where cart_num=#{cart_num}
	</select>

	<select id="total" parameterType="Map" resultType="int">
		select count(*) from cart
	</select>

	<select id="list" parameterType="Map" resultType="CartDTO">
		select cart_num, img_num, id, r
		from(
			select cart_num, img_num, id, rownum r
			from(
				select cart_num, img_num, id
				from cart
				order by cart_num DESC
				)
			)
				<where>
				<if test="jj=='dd'">
				id =#{id}
				</if>
				
				
				</where>
	</select>
</mapper>